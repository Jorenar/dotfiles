#!/bin/bash

id="$(xinput --list | awk -F'[^0-9]*' '/AT Translated Set 2 keyboard/ {printf $3}')"

if ! grep -Fxqs "keyboard_disabled" "$TMPFLAGS"; then
    notify-send  "Disabling Keyboard" \ "OFF - Keyboard disconnected";
    echo "disable keyboard"
    xinput disable $id
    echo 'keyboard_disabled' > "$TMPFLAGS"
else
    notify-send  "Enabling keyboard" \ "ON - Keyboard connected";
    echo "enable keyboard"
    xinput enable $id
    sed -i '/keyboard_disabled/d' "$TMPFLAGS"
fi
