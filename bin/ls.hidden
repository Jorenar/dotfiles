#!/usr/bin/env sh

LC_COLLATE=C

opts='-hF -w80 --time-style=iso -I. -I..'

hide=""
if [ -f .hidden ]; then
    hide="$(while IFS= read -r line; do
                [ -n "$line" ] && printf -- ' --hide=%q' "$line"
            done < .hidden)"
fi

for arg in "$@"; do
    args="$args $(printf '%q' "$arg")" # sanitize arguments for eval
done

eval "ls $opts $hide $args"
