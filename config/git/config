# vim: ft=gitconfig

[user]
    email = dev@jorenar.com
    name = Jorenar

[credential]
    helper = pass --no-erase

[init]
    defaultBranch = master

[filter "lfs"]
    clean    = git-lfs clean -- %f
    process  = git-lfs filter-process
    required = true
    smudge   = git-lfs smudge -- %f

[push]
    followTags = true
    autoSetupRemote = true

[remote "origin"]
    fetch = +refs/notes/*:refs/notes/*

[notes]
    displayRef = refs/notes/*

[merge]
    tool = vimdiff
    conflictstyle = zdiff3

[mergetool]
    prompt = false
    trustExitCode = true

[color "diff-highlight"]
    oldNormal = red bold
    oldHighlight = red bold 52
    newNormal = green bold
    newHighlight = green bold 22

[pager]
    log  = diff-highlight | less
    show = diff-highlight | less
    diff = diff-highlight | less

[interactive]
    diffFilter = diff-highlight

[log]
    date = iso

[core]
    hooksPath = ~/.local/config/git/hooks/_wrapper

[alias]
    a = !sh -c 'cd -- ${GIT_PREFIX:-.} && git add -- \""$@"\" && git status --short' --
    aa = !git diff --name-only | xargs git a
    st = status --short
    lg = log --oneline --graph --abbrev-commit --notes
    ls = !sh -ic 'cd ${GIT_PREFIX:-.} && ls ${@:-"-d"} $(git ls-tree HEAD | sed "s/^.*\\\t//")' -

    unstage = restore --staged
    submodule-update = submodule update --init --recursive --remote

    change-url     = !sh -c 'git remote set-url origin \"$1\"' -
    fast-init      = !sh -c 'git init && git commit --allow-empty --allow-empty-message -m \"\" && [ -n \"$1\" ] && git remote add origin \"$1\" && git push -u origin master' -
    orphan         = !sh -c 'git checkout --orphan \"$1\" && git rm -rf .' -
    prune-branches = !git remote prune origin && git branch -vv | awk '/: gone]/ {print $1}' | xargs -r git branch -d
